<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>roneos: System/spi_message.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mylogo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">roneos
   </div>
   <div id="projectbrief">Operating System for the r-one robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('spi__message_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spi_message.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SPI commands for the MSP430.  
<a href="#details">More...</a></p>

<p><a href="spi__message_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad1d4ce75fb5d7f8f834f1a61035f68f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#ad1d4ce75fb5d7f8f834f1a61035f68f5">msp430Init</a> (void)</td></tr>
<tr class="memdesc:ad1d4ce75fb5d7f8f834f1a61035f68f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize MSP430.  <a href="#ad1d4ce75fb5d7f8f834f1a61035f68f5">More...</a><br/></td></tr>
<tr class="separator:ad1d4ce75fb5d7f8f834f1a61035f68f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156ba8634cefe4902172c6d440d26ae7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a156ba8634cefe4902172c6d440d26ae7">msp430InterruptEnable</a> (void)</td></tr>
<tr class="memdesc:a156ba8634cefe4902172c6d440d26ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable MSP430 interrupt.  <a href="#a156ba8634cefe4902172c6d440d26ae7">More...</a><br/></td></tr>
<tr class="separator:a156ba8634cefe4902172c6d440d26ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f9e5cdd923cce0114c2f7560bed839"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a41f9e5cdd923cce0114c2f7560bed839">msp430InterruptDisable</a> (void)</td></tr>
<tr class="memdesc:a41f9e5cdd923cce0114c2f7560bed839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable MSP430 interrupt.  <a href="#a41f9e5cdd923cce0114c2f7560bed839">More...</a><br/></td></tr>
<tr class="separator:a41f9e5cdd923cce0114c2f7560bed839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ea52904dcf922ff4dc2eb6e66d6c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a30ea52904dcf922ff4dc2eb6e66d6c39">msp430SystemCommandBuildMessage</a> (uint8 *msg)</td></tr>
<tr class="memdesc:a30ea52904dcf922ff4dc2eb6e66d6c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a command for MSP430 message and reset command.  <a href="#a30ea52904dcf922ff4dc2eb6e66d6c39">More...</a><br/></td></tr>
<tr class="separator:a30ea52904dcf922ff4dc2eb6e66d6c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa4beb130c4af2997241e4df160da34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#adfa4beb130c4af2997241e4df160da34">msp430SetModeBuildMessage</a> (uint8 *data)</td></tr>
<tr class="memdesc:adfa4beb130c4af2997241e4df160da34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mode for MSP430 message.  <a href="#adfa4beb130c4af2997241e4df160da34">More...</a><br/></td></tr>
<tr class="separator:adfa4beb130c4af2997241e4df160da34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63d8555d0e263943eb604052368042a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a63d8555d0e263943eb604052368042a1">msp430SystemShutdownCommand</a> (void)</td></tr>
<tr class="memdesc:a63d8555d0e263943eb604052368042a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the command to shutdown.  <a href="#a63d8555d0e263943eb604052368042a1">More...</a><br/></td></tr>
<tr class="separator:a63d8555d0e263943eb604052368042a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e46817f154c64251245bb85af878abb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a5e46817f154c64251245bb85af878abb">msp430SystemReprogramCommand</a> (void)</td></tr>
<tr class="memdesc:a5e46817f154c64251245bb85af878abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the next command to the MSP430 to be to enter the boot-loader.  <a href="#a5e46817f154c64251245bb85af878abb">More...</a><br/></td></tr>
<tr class="separator:a5e46817f154c64251245bb85af878abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af74f24c291638a17854250a707e0e78e"><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#af74f24c291638a17854250a707e0e78e">msp430SystemCommandMessageGet</a> (void)</td></tr>
<tr class="separator:af74f24c291638a17854250a707e0e78e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfaa745cd63269f4cc81beb7ed69832"><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#abdfaa745cd63269f4cc81beb7ed69832">msp430SystemGetCommandMessage</a> (void)</td></tr>
<tr class="memdesc:abdfaa745cd63269f4cc81beb7ed69832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the command.  <a href="#abdfaa745cd63269f4cc81beb7ed69832">More...</a><br/></td></tr>
<tr class="separator:abdfaa745cd63269f4cc81beb7ed69832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf288d31d833a63eddd0cf072676246"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a4bf288d31d833a63eddd0cf072676246">msp430GetCommsValid</a> (void)</td></tr>
<tr class="memdesc:a4bf288d31d833a63eddd0cf072676246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets systemMSP430CommsValid.  <a href="#a4bf288d31d833a63eddd0cf072676246">More...</a><br/></td></tr>
<tr class="separator:a4bf288d31d833a63eddd0cf072676246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fbf2c042ed8f4a6553b97c306b854ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__message_8h.html#a7fbf2c042ed8f4a6553b97c306b854ba">msp430SetCommsValid</a> (boolean newCommsValid)</td></tr>
<tr class="memdesc:a7fbf2c042ed8f4a6553b97c306b854ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets systemMSP430CommsValid.  <a href="#a7fbf2c042ed8f4a6553b97c306b854ba">More...</a><br/></td></tr>
<tr class="separator:a7fbf2c042ed8f4a6553b97c306b854ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SPI commands for the MSP430. </p>
<dl class="section since"><dt>Since</dt><dd>Apr 2, 2012 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>James McLurkin </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4bf288d31d833a63eddd0cf072676246"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean msp430GetCommsValid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets systemMSP430CommsValid. </p>
<dl class="section return"><dt>Returns</dt><dd>systemMSP430CommsValid </dd></dl>

</div>
</div>
<a class="anchor" id="ad1d4ce75fb5d7f8f834f1a61035f68f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize MSP430. </p>
<p>use 400us interrupt for SPI comms. This lets us xmit our 24-byte message in 9.6 ms. At the end, we use a 32us interrupt for SPI comms. This is about as fast as the MSP430 can read bytes from the buffer. This double byte signals the end of the message for synchronizing the two processors </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a41f9e5cdd923cce0114c2f7560bed839"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430InterruptDisable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable MSP430 interrupt. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a156ba8634cefe4902172c6d440d26ae7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430InterruptEnable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable MSP430 interrupt. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a7fbf2c042ed8f4a6553b97c306b854ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430SetCommsValid </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>newCommsValid</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets systemMSP430CommsValid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newCommsValid</td><td>- new boolean value to set systemMSP430CommsValid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="adfa4beb130c4af2997241e4df160da34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430SetModeBuildMessage </td>
          <td>(</td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>data</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the mode for MSP430 message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>-sets to MSP430_MODE_C </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a30ea52904dcf922ff4dc2eb6e66d6c39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430SystemCommandBuildMessage </td>
          <td>(</td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>msg</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a command for MSP430 message and reset command. </p>
<p>Used to build the command for the actual command sent to the MSP430 Reset the command to normal mode </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="af74f24c291638a17854250a707e0e78e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 msp430SystemCommandMessageGet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="abdfaa745cd63269f4cc81beb7ed69832"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 msp430SystemGetCommandMessage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the command. </p>
<dl class="section return"><dt>Returns</dt><dd>systemMSP430 the command </dd></dl>

</div>
</div>
<a class="anchor" id="a5e46817f154c64251245bb85af878abb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430SystemReprogramCommand </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the next command to the MSP430 to be to enter the boot-loader. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a63d8555d0e263943eb604052368042a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msp430SystemShutdownCommand </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the command to shutdown. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9af51e3826d4f9e80d9103b2de543e84.html">System</a></li><li class="navelem"><a class="el" href="spi__message_8h.html">spi_message.h</a></li>
    <li class="footer">Generated on Tue Jun 11 2013 14:40:46 for roneos by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
